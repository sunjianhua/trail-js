<html>
<head>
    <title>Trail - Examples</title>

    <!-- app -->
    <script type="text/javascript" src="js/trail.min.js"></script>

    <!-- css linkage -->
    <link rel="stylesheet" type="text/css" href="css/trail.css" />
</head>
<body>
<h1>Trail.js Examples</h1>
<h2>Triangulation Tests</h2>
<p><b>Overview</b><br />Testing Polygon breakdown for correct triangulation. Results shown in Console.</p>
<p><a href="/">... back to examples</a></p>
<canvas id="canvas" width="640" height="480" style="border:1px solid">

    <!-- on ready -->
    <script type="text/javascript">
        window.onload = function()
        {
            console.log("Document* Ready");




            // TODO these 'should' be abstracted to a utility class in the examples/js folder
            // --- canvas helpers ---

            // canvas
            var ctx = document.getElementById('canvas').getContext('2d');

            // draw path
            function drawPolygon(poly, drawPoints)
            {
                var vertices = poly.getVertices();

                // draw poly
                ctx.fillStyle = "rgba(255, 20, 10, 0.4)";
                ctx.strokeStyle = '#ff0000';
                ctx.beginPath();
                ctx.moveTo(vertices[0].x, vertices[0].y);

                for(var i = 1; i < vertices.length; i++)
                {
                    ctx.lineTo(vertices[i].x, vertices[i].y);
                }

                ctx.closePath();
                ctx.fill();
                ctx.stroke();

                // draw vertices
                if(drawPoints)
                {
                    for(var i = 0; i < vertices.length; i++)
                    {
                        ctx.beginPath();
                        ctx.arc(vertices[i].x, vertices[i].y, 2, 0, 2 * Math.PI, false);
                        ctx.fillStyle = "rgba(0, 0, 255, 1)";
                        ctx.closePath();
                        ctx.fill();
                    }
                }
            }

            // -----------







            // init app
            TRAIL.sayHi();

            // create a poly
            var polygon1 = new TRAIL.Polygon([30,30, 90,30, 90,90, 30,90]);
            var polygon2 = new TRAIL.Polygon([180,40, 270,50, 290,100, 250,60]);
            var polygon3 = new TRAIL.Polygon([500,40, 400,40, 500,100, 400,100]);

            // triangulate polys
            var p1Triangles = polygon1.triangulate();
            var p2Triangles = polygon2.triangulate();
            var p3Triangles = polygon3.triangulate();

            console.log("%c Polygon Triangulation Tests* ", "background: #ff1234; color: #ffffff");
            console.log("Polygon1 Generates " + p1Triangles.length + " triangles");
            console.log("Polygon2 Generates " + p2Triangles.length + " triangles");
            console.log("Polygon3 Generates " + p3Triangles.length + " triangles");

            // render triangles
            for(var i = 0; i < p1Triangles.length; i++) {
                var triangle = p1Triangles[i];
                drawPolygon(triangle, true);
            }

            for(var i = 0; i < p2Triangles.length; i++) {
                var triangle = p2Triangles[i];
                drawPolygon(triangle, true);
            }

            for(var i = 0; i < p3Triangles.length; i++) {
                var triangle = p3Triangles[i];
                drawPolygon(triangle, true);
            }

        }
    </script>
</body>
</html>